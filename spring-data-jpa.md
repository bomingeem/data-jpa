#data-jpa
핵심 라이브러리
 · 스프링 MVC
 · 스프링 ORM
 · JPA, 하이버네이트
 · 스프링 데이터 JPA
기타 라이브러리
 · H2 데이터베이스 클라이언트
 · 커넥션 풀: 부트 기본은 HikariCP
 · 로깅 SLF4 & LogBack
 · 테스트
 
사용자 정의 구현 클래스
 · 규칙 : 리포지토리 인터페이스 이름 + Impl
 · 스프링 데이터 JPA가 인식해서 스프링 빈으로 등록
참고 : 실무에서는 주로 QueryDSL이나 SpringJdbcTemplate을 함께 사용할 때 사용자 정의 리포지토리 기능 자주 사용
스프링 데이터 2.x부터는 사용자 정의 구현 클래스에 리포리조리 이름 + Impl을 적용하는 대신에
사용자 정의 인터페이스명 + Impl 방식도 지원한다 ex) MemberRepositoryImpl 대신 MemberRepositoryCustomImpl

Auditing
참고 : 실무에서 대부분의 엔티티는 등록시간, 수정시간이 필요하지만 등록자, 수정자는 없을 수도 있다.
그래서 다음과 같이 Base 타입을 분리하고, 원하늩 타입을 선택해서 상속한다.

Web 확장 - 도메인 클래스 컨버터
HTTP 파라미터로 넘어온 엔티티의 아이디로 엔티티 객체를 찾아서 바인딩
 · HTTP 요청은 회원 id를 받지만 도메인 클래스 컨버터가 중간에 동작해서 회원 엔티티 객체를 반환
 · 도메인 클래스 컨버터도 리포지토리를 사용해서 엔티티를 찾음
주의 : 도메인 클래스 컨버터로 엔티티를 파라미터로 받으면, 이 엔티티는 단순 조회용으로만 사용해야 한다.
(트랜잭션이 없는 범위에서 엔티티를 조회했으므로, 엔티티를 변경해도 DB에 반영되지 않음)

Web 확장 - 페이징과 정렬
스프링 데이터가 제공하는 페이징과 정렬 기능을 스프링 MVC에서 편리하게 사용할 수 있다.

* save 메서드
 · 새로운 엔티티면 저장(persist)
 · 새로운 엔티티가 아니면 병합(merge)

새로운 엔티티를 판단하는 기본 전략
 · 식별자가 객체일 때 null로 판단
 · 식별자가 자바 기본 타입일 때 0으로 판단
 · Persistable 인터페이스를 구현해서 판단 로직 변경 가능
 